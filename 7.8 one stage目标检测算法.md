# one stage目标检测算法
## 1 特点
+ 使用CNN卷积作为特征提取；
+ 无需region proposal，直接回归目标物体的类别概率和位置坐标；
+ 准确度低，但速度快

## 2 常见算法
包含：YOLO，SSD，YOLOv2，YOLOv3等等。

### 2.1 YOLO
算法的全拼是You Only Look Once，顾名思义就是只看一次，进一步把目标判定和目标识别两个步骤合二为一，所以识别速度有了很大提升，达到每秒45帧，而在快速版YOLO(Fast YOLO，卷积层更
少)中，可以达到每秒155帧，这样就完全能满足实时性要求（达到24帧每秒，人眼就认为是连续的
）。

YOLO的优点与缺点：
+ YOLO将目标检测任务转换成回归问题，大大加快了检测的速度。同时由于网络预测每个目标窗口时使用的是全局信息，使得false positive比例大幅降低（充分利用上下文信息）；
+ YOLO算法的精准性和召回率相对于Fast T-CNN来说比较差，其对于背景的误判率比Fast R-CNN的误判率低很多；
+ 由于YOLO使用整图特征在7*7的粗糙网格内回归，对目标的定位并不是很精准，检测精度不高；
+ 由于YOLO的输出层为全连接层，因此在检测时，YOLO训练模型只支持与训练图像相同的输入分辨率。其它分辨率需要缩放成该分辨率后才可训练或测试。
+ YOLO对于图像上较小的目标检测效果不好。虽然每个格子可以预测2个bounding box，但是最终只选择只选择IOU最高的bounding box作为物体检测输出，即每个格子最多只预测出一个物体。当物体占画面比例较小，如图像中包含畜群或鸟群时，每个格子包含多个物体，但却只能检测出其中一个。

### 2.2 SSD
英文Single Shot MultiBox Detector的缩写，译为单次多盒检测器。RCNN系列(R-CNN、SPPnet、
Fast R-CNN以及Faster R-CNN)的two stage的方法要预先回归一次边框，然后再进行骨干网络训练，所以精度要高，但速度上比较慢。对了解决速度上的问题，YOLO算法只做一次边框回归和打分，这使得算法的运行速度很快。但是也由于只做一次边框回归并打分，YOLO对于小目标的训练非常不充分，对小目标的检测效果非常差。简而言之，YOLO系列对于目标的尺度比较敏感，而且对于尺度变化较大的物体泛化能力比较差。针对YOLO和Faster R-CNN的各自不足与优势，SSD算法应运而生。

SSD整个网络采取了one stage的思想，以此提高检测速度。并且网络中融入了Faster R-CNN中的anchors思想，并且做了特征分层提取并依次计算边框回归和分类操作，由此可以适应多种尺度目标的训练和检测任务。SSD网络主体设计的思想是特征分层提取，并依次进行边框回归和分类。因为不同层次的特征图能代表不同层次的语义信息，低层次的特征图能代表低层语义信息(含有更多的细节)，能提高语义分割质量，适合小尺度目标的学习。高层次的特征图能代表高层语义信息，能光滑分割结果，适合对大尺度的目标进行深入学习。所以作者提出的SSD的网络理论上能适合不同尺度的目标检测。SSD基本已经可以满足我们手机端上实时物体检测需求了。

SSD算法的优缺点：
+  SSD算法的运行速度超过YOLO，精度超过Faster-rcnn（在一定条件下，对于稀疏场景的大目标而言）；
+  SSD需要人工设置prior box的min_size，max_size和aspect_ratio值。网络中default box的基础大小和形状不能直接通过学习获得，而是需要手工设置。而网络中每一层feature使用的default box大小和形状恰好都不一样，导致调试过程非常依赖经验；
+  SSD虽然采用了金字塔特征层次结构的思路，但是对小目标的recall依然一般，相对于Faster RCNN的优势不明显。这可能是因为SSD使用conv4_3的低级feature去检测小目标，而低级特征卷积层数少，存在特征提取不充分的问题；
+  如果场景是密集的包含多个小目标的，建议用Faster-rcnn，针对特定的网络进行优化，也可以继续加速；。果你的应用对速度要求很苛刻，那么肯定首先考虑SSD，至于那些测试集上的评估结果，和真实的数据还是有很大的差距，算法的性能也需要进一步进行评估。

### 2.3 YOLOv2/YOLO 9000：
前者主要是YOLO的升级版（关于YOLO v1的介绍可以参考：YOLO v1算法详解），后者的主要检测
网络也是YOLO v2，同时对数据集做了融合，使得模型可以检测9000多类物体。而提出YOLO9000的原因主要是目前检测的数据集数据量较小，因此利用数量较大的分类数据集来帮助训练检测模型。这两者主要是对精度、速度、分类进行了改进。

### 2.4 YOLOv3
YOLOv3是到目前为止，速度和精度最均衡的目标检测网络。通过多种先进方法的融合，将YOLO系列的短板（速度很快，不擅长检测小物体等）全部补齐。达到了令人惊艳的效果和拔群的速度。主要在多标签分类预测、跨尺度预测、网络结构的改变做了一些很好的工作。

## 3 one stage的核心组件
one-stage检测算法的核心组件是CNN主干网络+回归网络。

## 4 one-stage的优缺点
优点：速度快、能够学到物体的泛化特征、避免背景错误产生false positive；

缺点：准确度低、对小目标检测效果不佳。


